@use "sass:color";
@use "../../styles" as *;

.button {
 display: inline-flex;
  align-items: center;
  gap: $spacing-2;
  padding: $spacing-2 $spacing-4;
  border-radius: $radius-md;
  border: 1px solid $color-border-primary;
  background-color: $color-bg-surface;
  color: $color-text-primary;
  font-size: $font-size-sm;
  font-weight: $font-weight-medium;
  cursor: pointer;
  transition: all 0.2s ease;

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  // --- Variants ---
  &--primary {
    background-color: $color-brand-primary;
    color: $color-text-on-brand;
    border-color: $color-brand-primary;
    
    &:hover:not(:disabled) {
      background-color: $color-brand-primary-hover;
      border-color: $color-brand-primary-hover;
      transform: translateY(-2px);
      box-shadow: $shadow-md;
    }
    &:active:not(:disabled) {
        transform: translateY(0);
        box-shadow: none;
    }
  }

  &--secondary {
    background-color: $color-bg-secondary;
    color: $color-text-primary;
    border-color: $color-border-primary;

    &:hover:not(:disabled) {
      // ✨ --- تغییر کلیدی اینجاست ---
      // ما از متغیر رنگ خام $secondary-bg-light برای محاسبه استفاده می‌کنیم
      background-color: color.adjust($secondary-bg-light, $lightness: -5%);
      border-color: $color-border-secondary;
    }
  }

  &--ghost {
    background-color: transparent;
    color: $color-text-secondary;
    border-color: transparent;

    &:hover:not(:disabled) {
      background-color: $color-bg-surface-hover;
      color: $color-text-primary;
    }
  }

  // --- Loader ---
  &__loader {
    width: 1.2em;
    height: 1.2em;
    border: 2px solid currentColor;
    border-bottom-color: transparent;
    border-radius: 50%;
    animation: rotation 0.8s linear infinite;
  }

  @keyframes rotation {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
}