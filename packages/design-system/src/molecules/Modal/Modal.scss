@use "../../styles" as *;

// --- Keyframes برای انیمیشن‌ها ---

// انیمیشن محو شدن برای پس‌زمینه (overlay)
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

// انیمیشن ظاهر شدن دیالوگ با کمی مقیاس و محو شدن
@keyframes scaleIn {
  from { 
    opacity: 0;
    transform: scale(0.95); // از کمی کوچکتر شروع می‌شود
  }
  to { 
    opacity: 1;
    transform: scale(1); // به اندازه اصلی می‌رسد
  }
}

// --- استایل‌های اصلی کامپوننت ---

.modal {
  &__overlay {
    // ۱. کل صفحه را می‌پوشاند و محتوا را در مرکز قرار می‌دهد
    position: fixed;
    inset: 0;
    background-color: rgba($gray-900, 0.6);
    z-index: $z-index-max;
    display: flex;
    align-items: center; // وسط‌چین عمودی
    justify-content: center; // وسط‌چین افقی
    padding: $spacing-4;
    
    // اعمال انیمیشن سریع
    animation: fadeIn 0.2s ease-out forwards;
  }

  &__dialog {
    width: 100%;
    max-width: 500px; // عرض حداکثر برای دسکتاپ
    background-color: $color-bg-surface;
    border-radius: $radius-xl;
    box-shadow: $shadow-2xl;
    display: flex;
    flex-direction: column;
    
    // ۲. اعمال انیمیشن جدید و روان
    animation: scaleIn 0.2s cubic-bezier(0.1, 0.9, 0.2, 1) forwards;

    // مدیریت ارتفاع در صفحات کوچک
    max-height: 90vh;
  }

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-4 $spacing-6;
    border-bottom: 1px solid $color-border-secondary;
    flex-shrink: 0; // جلوگیری از کوچک شدن
  }

  &__body {
    padding: $spacing-6;
    overflow-y: auto; // فقط بدنه مودال اسکرول می‌خورد
    color: $color-text-secondary;
    line-height: $line-height-relaxed;
  }

  &__footer {
    display: flex;
    justify-content: flex-end;
    gap: $spacing-3;
    padding: $spacing-4 $spacing-6;
    background-color: $color-bg-secondary;
    border-top: 1px solid $color-border-secondary;
    flex-shrink: 0;
    border-bottom-left-radius: $radius-xl;
    border-bottom-right-radius: $radius-xl;
  }

  // استایل برای فوتر فرم‌ها (که قبلاً ساختیم)
  &.form-modal .modal__footer {
    justify-content: space-between;
  }
}