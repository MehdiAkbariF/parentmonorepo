@use "../../styles" as *;

// --- ۱. تعریف Keyframes جدید برای انیمیشن‌های روان ---

// انیمیشن محو شدن برای پس‌زمینه
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

// انیمیشن ظاهر شدن دیالوگ از پایین و با کمی محو شدن
@keyframes slideInUp {
  from { 
    opacity: 0;
    transform: translate(-50%, -45%); // کمی بالاتر از مرکز شروع می‌شود
  }
  to { 
    opacity: 1;
    transform: translate(-50%, -50%); // به مرکز می‌رسد
  }
}

.modal {
  &__overlay {
    position: fixed;
    inset: 0;
    background-color: rgba($gray-900, 0.7); // کمی تیره‌تر برای کنتراست بهتر
    z-index: $z-index-max;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: $spacing-4;
    
    // ۲. ✨ اعمال انیمیشن سریع‌تر
    animation: fadeIn 0.15s ease-out forwards;
  }

  &__dialog {
    width: 100%;
    max-width: 500px;
    background-color: $color-bg-surface;
    border-radius: $radius-xl;
    box-shadow: $shadow-2xl; // سایه برجسته‌تر
    display: flex;
    flex-direction: column;
    
    // ۳. ✨ اعمال انیمیشن جدید و سریع
    // ما دیگر از position: fixed در اینجا استفاده نمی‌کنیم
    // چون والد (__overlay) این کار را انجام می‌دهد
    animation: slideInUp 0.2s cubic-bezier(0.1, 0.9, 0.2, 1) forwards;

    // این به ما اجازه می‌دهد که وقتی محتوای مودال زیاد است، خود دیالوگ اسکرول بخورد
    max-height: 90vh; 
  }

  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: $spacing-4 $spacing-6;
    border-bottom: 1px solid $color-border-secondary;
    flex-shrink: 0;
  }

  &__body {
    padding: $spacing-6;
    overflow-y: auto; // فقط بدنه مودال اسکرول می‌خورد
    color: $color-text-secondary;
    line-height: $line-height-relaxed;
  }

  &__footer {
    display: flex;
    justify-content: flex-end;
    gap: $spacing-3;
    padding: $spacing-4 $spacing-6;
    background-color: $color-bg-secondary;
    border-top: 1px solid $color-border-secondary;
    flex-shrink: 0;
    border-bottom-left-radius: $radius-xl;
    border-bottom-right-radius: $radius-xl;
  }
}